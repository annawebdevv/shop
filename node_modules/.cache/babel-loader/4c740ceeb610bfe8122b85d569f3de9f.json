{"ast":null,"code":"import{useContext}from\"react\";import{ProductsContext}from\"../../../App\";import{getArray}from\"../../../hooks/usePagination\";import{productsApi}from\"../../../store/servises\";import{Pagination}from\"./Pagination\";import{ProductItem}from\"./ProductItem\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Products=function Products(){var count=5;var pages=[];var _useContext=useContext(ProductsContext),state=_useContext.state;var skip=count*(state.currentPage-1);var _productsApi$useGetCa=productsApi.useGetCategoriesQuery(),categories=_productsApi$useGetCa.data;var _ref=categories&&state.category!==null?productsApi.useGetProductsOfCategoriesQuery({category:categories[state.category]}):state.search===\"\"?productsApi.useGetProductsQuery({count:count,skip:skip}):productsApi.useGetSearchProductsQuery({search:state.search,skip:skip}),data=_ref.data,refetch=_ref.refetch;if(data)pages=getArray(data.total/count);return/*#__PURE__*/_jsxs(\"div\",{children:[data&&data.products.map(function(p){return/*#__PURE__*/_jsx(ProductItem,{title:p.title,img:p.images[0],price:p.price,descr:p.description,count:p.stock,id:p.id},p.id);}),pages.length>6&&/*#__PURE__*/_jsx(Pagination,{pages:pages,refetch:refetch})]});};","map":{"version":3,"names":["useContext","ProductsContext","getArray","productsApi","Pagination","ProductItem","Products","count","pages","state","skip","currentPage","useGetCategoriesQuery","categories","data","category","useGetProductsOfCategoriesQuery","search","useGetProductsQuery","useGetSearchProductsQuery","refetch","total","products","map","p","title","images","price","description","stock","id","length"],"sources":["/Users/user/Documents/Новая папка/shop/shop/src/components/Body/Products/Products.jsx"],"sourcesContent":["import {  useContext } from \"react\";\nimport { ProductsContext } from \"../../../App\";\nimport { getArray } from \"../../../hooks/usePagination\";\nimport { productsApi } from \"../../../store/servises\";\nimport { Pagination } from \"./Pagination\";\nimport { ProductItem } from \"./ProductItem\";\n\nexport const Products = () => {\n  let count = 5;\n  let pages = [];\n  const { state } = useContext(ProductsContext);\n\n  const skip = count * (state.currentPage - 1);\n  const { data: categories } = productsApi.useGetCategoriesQuery();\n\n\n  const{ data, refetch } =\n    categories && state.category !== null\n      ? productsApi.useGetProductsOfCategoriesQuery({\n          category: categories[state.category],\n        })\n      : state.search === \"\"\n      ? productsApi.useGetProductsQuery({ count, skip })\n      : productsApi.useGetSearchProductsQuery({search: state.search, skip})\n\n  if (data) pages = getArray(data.total / count);\n\n  return (\n    <div>\n      {data &&\n        data.products.map((p) => (\n          <ProductItem\n            title={p.title}\n            img={p.images[0]}\n            price={p.price}\n            descr={p.description}\n            count={p.stock}\n            key={p.id}\n            id={p.id}\n          />\n        ))}\n      {pages.length > 6 && (\n        <Pagination\n          pages={pages}\n          refetch={refetch}\n        />\n      )}\n    </div>\n  );\n};\n"],"mappings":"AAAA,OAAUA,UAAV,KAA4B,OAA5B,CACA,OAASC,eAAT,KAAgC,cAAhC,CACA,OAASC,QAAT,KAAyB,8BAAzB,CACA,OAASC,WAAT,KAA4B,yBAA5B,CACA,OAASC,UAAT,KAA2B,cAA3B,CACA,OAASC,WAAT,KAA4B,eAA5B,C,wFAEA,MAAO,IAAMC,SAAQ,CAAG,QAAXA,SAAW,EAAM,CAC5B,GAAIC,MAAK,CAAG,CAAZ,CACA,GAAIC,MAAK,CAAG,EAAZ,CACA,gBAAkBR,UAAU,CAACC,eAAD,CAA5B,CAAQQ,KAAR,aAAQA,KAAR,CAEA,GAAMC,KAAI,CAAGH,KAAK,EAAIE,KAAK,CAACE,WAAN,CAAoB,CAAxB,CAAlB,CACA,0BAA6BR,WAAW,CAACS,qBAAZ,EAA7B,CAAcC,UAAd,uBAAQC,IAAR,CAGA,SACED,UAAU,EAAIJ,KAAK,CAACM,QAAN,GAAmB,IAAjC,CACIZ,WAAW,CAACa,+BAAZ,CAA4C,CAC1CD,QAAQ,CAAEF,UAAU,CAACJ,KAAK,CAACM,QAAP,CADsB,CAA5C,CADJ,CAIIN,KAAK,CAACQ,MAAN,GAAiB,EAAjB,CACAd,WAAW,CAACe,mBAAZ,CAAgC,CAAEX,KAAK,CAALA,KAAF,CAASG,IAAI,CAAJA,IAAT,CAAhC,CADA,CAEAP,WAAW,CAACgB,yBAAZ,CAAsC,CAACF,MAAM,CAAER,KAAK,CAACQ,MAAf,CAAuBP,IAAI,CAAJA,IAAvB,CAAtC,CAPN,CAAOI,IAAP,MAAOA,IAAP,CAAaM,OAAb,MAAaA,OAAb,CASA,GAAIN,IAAJ,CAAUN,KAAK,CAAGN,QAAQ,CAACY,IAAI,CAACO,KAAL,CAAad,KAAd,CAAhB,CAEV,mBACE,uBACGO,IAAI,EACHA,IAAI,CAACQ,QAAL,CAAcC,GAAd,CAAkB,SAACC,CAAD,qBAChB,KAAC,WAAD,EACE,KAAK,CAAEA,CAAC,CAACC,KADX,CAEE,GAAG,CAAED,CAAC,CAACE,MAAF,CAAS,CAAT,CAFP,CAGE,KAAK,CAAEF,CAAC,CAACG,KAHX,CAIE,KAAK,CAAEH,CAAC,CAACI,WAJX,CAKE,KAAK,CAAEJ,CAAC,CAACK,KALX,CAOE,EAAE,CAAEL,CAAC,CAACM,EAPR,EAMON,CAAC,CAACM,EANT,CADgB,EAAlB,CAFJ,CAaGtB,KAAK,CAACuB,MAAN,CAAe,CAAf,eACC,KAAC,UAAD,EACE,KAAK,CAAEvB,KADT,CAEE,OAAO,CAAEY,OAFX,EAdJ,GADF,CAsBD,CA1CM"},"metadata":{},"sourceType":"module"}